<script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>

<script>
  let auth0Client = null;

  window.initAuth = async function () {
    auth0Client = await createAuth0Client({
      domain: "dev-6wjj1eidnph54te8.us.auth0.com",
      clientId: "LlcVZoBLJOeOWuuJ5Qv267vMRKtsWBqe",
      authorizationParams: {
        redirect_uri: window.location.origin
      }
    });

    // Enable login button once Auth0 is ready
    const loginBtn = document.getElementById("loginBtn");
    if (loginBtn) {
      loginBtn.style.pointerEvents = "auto";
      loginBtn.style.opacity = "1";
    }
  };

  window.login = async function () {
    console.log("login() called");
    if (!auth0Client) {
      console.warn("Auth0 not initialized yet");
      return;
    }
    await auth0Client.loginWithRedirect();
  };

  window.logout = async function () {
    if (!auth0Client) return;
    await auth0Client.logout({
      logoutParams: {
        returnTo: window.location.origin
      }
    });
  };

  // Disable login until Auth0 initializes
  window.addEventListener("DOMContentLoaded", () => {
    const loginBtn = document.getElementById("loginBtn");
    if (loginBtn) {
      loginBtn.style.pointerEvents = "none";
      loginBtn.style.opacity = "0.6";
    }
  });

  window.addEventListener("load", initAuth);
</script>
